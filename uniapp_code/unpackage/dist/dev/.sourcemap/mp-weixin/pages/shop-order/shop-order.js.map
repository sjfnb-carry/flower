{"version":3,"sources":["uni-app:///main.js","webpack:///D:/bishe/bs2/uniapp_code/pages/shop-order/shop-order.vue?717a","webpack:///D:/bishe/bs2/uniapp_code/pages/shop-order/shop-order.vue?93ef","webpack:///D:/bishe/bs2/uniapp_code/pages/shop-order/shop-order.vue?15fd","webpack:///D:/bishe/bs2/uniapp_code/pages/shop-order/shop-order.vue?a391","uni-app:///pages/shop-order/shop-order.vue","webpack:///D:/bishe/bs2/uniapp_code/pages/shop-order/shop-order.vue?6d96"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","mescrollUni","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","user","id","__map","list","item","index","$orig","__get_orig","m0","type","priceChange","price","m1","m2","total","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","navlist","currentIndex","pages","mescroll","downOption","auto","upOption","page","noMoreSize","textNoMore","hasNext","status","computed","baseUrl","onShow","table","res","methods","navselect","mescrollInit","downCallback","upCallback","params","limit","sort","order","userid","onCancelTap1","_this","uni","title","content","success","onCancelTap","orderDiscuss","logistics","returnGood","cancelGroup","goodDetail","cancel","pay","onConfirm","del"],"mappings":"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","file":"pages/shop-order/shop-order.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/shop-order/shop-order.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shop-order.vue?vue&type=template&id=7c639234&\"\nvar renderjs\nimport script from \"./shop-order.vue?vue&type=script&lang=js&\"\nexport * from \"./shop-order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shop-order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop-order/shop-order.vue\"\nexport default component.exports","export * from \"-!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop-order.vue?vue&type=template&id=7c639234&\"","var components\ntry {\n  components = {\n    mescrollUni: function () {\n      return import(\n        /* webpackChunkName: \"components/mescroll-uni/mescroll-uni\" */ \"@/components/mescroll-uni/mescroll-uni.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.user.id\n    ? _vm.__map(_vm.list, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var m0 =\n          item.type == 1 || item.type == 3 ? _vm.priceChange(item.price) : null\n        var m1 = item.type == 2 ? _vm.priceChange(item.price) : null\n        var m2 =\n          item.type == 1 || item.type == 3 ? _vm.priceChange(item.total) : null\n        return {\n          $orig: $orig,\n          m0: m0,\n          m1: m1,\n          m2: m2,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop-order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop-order.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view v-if=\"user.id\">\r\n\t\t<scroll-view  scroll-x class=\"bg-white nav\">\r\n\t\t\t<view class='flex text-center'>\r\n\t\t\t\t<view class=\"cu-item flex-sub text-df \" @click=\"navselect(index,nav)\" v-for=\"(nav,index) in navlist\" :key=\"index\"\r\n\t\t\t\t :class=\"[index == currentIndex ? 'text-red cur' : '']\">\r\n\t\t\t\t\t{{nav}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<mescroll-uni :top=\"88\" @init=\"mescrollInit\" :up=\"upOption\" :down=\"downOption\" @down=\"downCallback\" @up=\"upCallback\">\r\n\t\t\t<view v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t<view class=\"bg-white margin-sm padding-sm solids-bottom radius text-content\">\r\n\t\t\t\t\t<view class=\"flex justify-between\">\r\n\t\t\t\t\t\t<view class=\"text-bold\" style=\"flex-shrink: 0;\">\r\n\t\t\t\t\t\t\t<text class=\"text-red\">{{ item.status == '未支付'?'未支付':'' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"text-green\">{{ item.status == '已支付'?'已支付':'' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"text-green\">{{ item.status == '拼团中'?'拼团中':'' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"text-red\">{{ item.status == '已发货'?'已发货':'' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"text-blue\">{{ item.status == '已完成'?'已完成':'' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"text-grey\">{{ item.status == '已取消'?'已取消':'' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"text-grey\">{{ item.status == '已退款'?'已退款':'' }}</text>\r\n\t\t\t\t\t\t\t<text v-if=\"item.sfsh=='待审核'&&item.status=='已完成'\" class=\"text-red\">退货审核中</text>\r\n\t\t\t\t\t\t\t<text v-if=\"item.sfsh=='待审核'&&item.status=='已支付'\" class=\"text-red\">退款审核中</text>\r\n\t\t\t\t\t\t\t<text v-if=\"item.sfsh=='是'&&item.status=='已完成'\"  class=\"text-red\">退货成功</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view><text class=\"icon-goods padding-right-sm\"></text><text class=\"text-bold solids-bottom\">{{ item.orderid }}</text></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bg-white margin-xs padding-xs  radius text-content\">\r\n\t\t\t\t\t\t<view class=\"flex padding-top-sm solids-top\">\r\n\t\t\t\t\t\t\t<image :src=\"baseUrl+item.picture\" style=\"flex-shrink: 0;\" mode=\"aspectFill\" class=\" cover radius solids\"></image>\r\n\t\t\t\t\t\t\t<view class=\"text-content padding-left\" style=\"flex-grow: 1;\">\r\n\t\t\t\t\t\t\t\t<view>{{ item.goodname }}</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.type==1 || item.type==3\">{{ item.buynumber }} x ￥{{priceChange(item.price)}}</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.type==2\">{{ item.buynumber }} x {{priceChange(item.price)}}积分</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex justify-end\">收货人：{{item.consignee}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex justify-end\">电话：{{item.tel}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex justify-end\">地址：{{item.address}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex justify-end\">下单时间：{{item.addtime}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"flex justify-end\">备注：{{item.remark}}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"item.type==1 || item.type==3\" class=\"flex justify-end\">合计{{priceChange(item.total)}}元</view>\r\n\t\t\t\t\t\t<view v-if=\"item.type==2\" class=\"flex justify-end\">合计{{ item.total }}积分</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-end\"></view>\r\n\t\t\t\t\t<view class=\"flex justify-end\" style=\"font-size: 24upx;\">\r\n\t\t\t\t\t\t<view v-if=\"item.status == '未支付'\">\r\n\t\t\t\t\t\t\t<view @tap=\"pay(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">支付</view>\r\n\t\t\t\t\t\t\t<view @tap=\"cancel(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">取消订单</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"item.status == '已支付'\">\r\n<view   v-if=\"item.status=='已支付'\" @tap=\"onCancelTap1(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">退款</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"item.status == '拼团中'\">\r\n\t\t\t\t\t\t\t<view @tap=\"cancelGroup(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">取消拼团</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"item.status == '已完成'\">\r\n\t\t\t\t\t\t\t<view @tap=\"returnGood(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">退货</view>\r\n\t\t\t\t<view @tap=\"orderDiscuss(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">评价</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"item.status == '已发货'\">\r\n\t\t\t\t\t\t\t<view @tap=\"onConfirm(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">确认收货</view>\r\n\t\t\t\t\t\t</view>\r\n                        <view v-if=\"item.status == '已取消'||item.status == '已完成'||item.status == '已退款'\">\r\n                            <view @tap=\"del(item.id)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">删除订单</view>\r\n                        </view>\r\n                        <view v-if=\"item.logistics\" @tap=\"logistics(item)\" class=\"round cu-btn lines-grey mid  margin-right-sm\">物流</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</mescroll-uni>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tnavlist: [\r\n\t\t\t\t\t'全部', '未支付', '拼团中', '已支付', '已发货' ,'已完成', '已取消', '已退款'\r\n\t\t\t\t],\r\n\t\t\t\tcurrentIndex: 0,\r\n\t\t\t\tpages: 1,\r\n\t\t\t\tlist: [],\r\n\t\t\t\tmescroll: null, //mescroll实例对象\r\n\t\t\t\tdownOption: {\r\n\t\t\t\t\tauto: false //是否在初始化后,自动执行下拉回调callback; 默认true\r\n\t\t\t\t},\r\n\t\t\t\tupOption: {\r\n\t\t\t\t\tpage: {\r\n\t\t\t\t\t\t// num: 0, // 当前页码,默认0,回调之前会加1,即callback(page)会从1开始\r\n\t\t\t\t\t\t// size: 5 // 每页数据的数量\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnoMoreSize: 3, //如果列表已无数据,可设置列表的总数量要大于半页才显示无更多数据;避免列表数据过少(比如只有一条数据),显示无更多数据会不好看; 默认5\r\n\t\t\t\t\ttextNoMore: '~ 没有更多了 ~',\r\n\t\t\t\t},\r\n\t\t\t\thasNext: true,\r\n\t\t\t\tstatus: '',\r\n\t\t\t\tuser: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tbaseUrl() {\r\n\t\t\t\treturn this.$base.url;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onShow() {\r\n\t\t\tlet table = uni.getStorageSync(\"nowTable\");\r\n\t\t\tlet res = await this.$api.session(table)\r\n\t\t\tthis.user = res.data\r\n\t\t\tthis.hasNext = true\r\n\t\t\t// 重新加载数据\r\n\t\t\tif (this.mescroll) this.mescroll.resetUpScroll()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tnavselect(index, nav) {\r\n\t\t\t\tthis.currentIndex = index\r\n\t\t\t\tif (nav == '全部') {\r\n\t\t\t\t\tthis.status = \"\";\r\n\t\t\t\t} else if (nav == '已支付') {\r\n\t\t\t\t\tthis.status = \"已支付\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.status = nav\r\n\t\t\t\t}\r\n\t\t\t\tthis.hasNext = true\r\n\t\t\t\t// 重新加载数据\r\n\t\t\t\tif (this.mescroll) this.mescroll.resetUpScroll()\r\n\t\t\t},\r\n            priceChange(price) {\r\n                return Number(price).toFixed(2);\r\n            },\r\n\t\t\t// mescroll组件初始化的回调,可获取到mescroll对象\r\n\t\t\tmescrollInit(mescroll) {\r\n\t\t\t\tthis.mescroll = mescroll;\r\n\t\t\t},\r\n\t\t\t/*下拉刷新的回调 */\r\n\t\t\tdownCallback(mescroll) {\r\n\t\t\t\tthis.hasNext = true\r\n\t\t\t\t// 重置分页参数页数为1\r\n\t\t\t\tmescroll.resetUpScroll()\r\n\t\t\t},\r\n\t\t\t/*上拉加载的回调: mescroll携带page的参数, 其中num:当前页 从1开始, size:每页数据条数,默认10 */\r\n\t\t\tasync upCallback(mescroll) {\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tpage: mescroll.num,\r\n\t\t\t\t\tlimit: mescroll.size,\r\n                    sort: \"addtime\",\r\n                    order: \"desc\",\r\n\t\t\t\t\tuserid: this.user.id,\r\n\t\t\t\t}\r\n\t\t\t\tif (this.status) {\r\n\t\t\t\t\tparams['status'] = this.status\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.$api.list('orders', params);\r\n\t\t\t\t// 如果是第一页数据置空\r\n\t\t\t\tif (mescroll.num == 1) this.list = [];\r\n\t\t\t\tthis.list = this.list.concat(res.data.list);\r\n\t\t\t\tif (res.data.list.length == 0) this.hasNext = false;\r\n\t\t\t\tmescroll.endSuccess(mescroll.size, this.hasNext);\r\n\t\t\t},\r\n\t\t\tasync onCancelTap1(order) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否确认退款',\r\n\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\tlet table = uni.getStorageSync(\"nowTable\");\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\torder.status = '已退款';\r\n\t\t\t\t\t\t\t// 设置订单状态为取消\r\n\t\t\t\t\t\t\tlet res = await _this.$api.update('orders', order);\r\n\t\t\t\t\t\t\tres = await _this.$api.info(order.tablename, order.goodid);\r\n\t\t\t\t\t\t\tif(res.code==0){\r\n\t\t\t\t\t\t\tres.data.alllimittimes?res.data.alllimittimes = Number(res.data.alllimittimes) + Number(order.buynumber):'';\r\n\t\t\t\t\t\t\tres.data.jf?_this.user.jf = Number(_this.user.jf) - Number(order.total):'';\r\n\t\t\t\t\t\t\tawait _this.$api.update(order.tablename,  res.data);\r\n                          }\r\n\r\n\t\t\t\t\t\t\t_this.hasNext = true;\r\n\t\t\t\t\t\t\t// 重新加载数据\r\n\t\t\t\t\t\t\tif (_this.mescroll) _this.mescroll.resetUpScroll()\r\n\t\t\t\t\t\t\tif(order.type==1 || order.type==3) {\r\n\t\t\t\t\t\t\t\t// 退回用户余额\r\n\t\t\t\t\t\t\t\t_this.user.money = Number(_this.user.money) + Number(order.total);\r\n\t\t\t\t\t\t\t} else if(order.type==2) {\r\n\t\t\t\t\t\t\t\t// 退回用户积分\r\n\t\t\t\t\t\t\t\t_this.user.jf = Number(_this.user.jf) + Number(order.total);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.$api.update(table, _this.user);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync onCancelTap(order) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定要申请退款',\r\n\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\tlet table = uni.getStorageSync(\"nowTable\");\r\n\t\t\t\t\t\tif (res.confirm) {\r\n//是\r\n\t\t\t\t\t\t\tconsole.log('是')\r\n\t\t\t\t\t\t\torder.sfsh = '待审核';\r\n\t\t\t\t\t\t\torder.role = uni.getStorageSync(\"nowTable\");\r\n\t\t\t\t\t\t\t// 设置订单状态为取消\r\n\t\t\t\t\t\t\tlet res = await _this.$api.update('orders', order);\r\n\t\t\t\t\t     \t_this.$utils.msg(`退款申请已提交`);\r\n\r\n\t\t\t\t\t\t\t_this.hasNext = true;\r\n\t\t\t\t\t\t\t// 重新加载数据\r\n\t\t\t\t\t\t\tif (_this.mescroll) _this.mescroll.resetUpScroll()\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\torderDiscuss(order) {\r\n\t\t\t\tthis.$utils.jump(`../discuss`+order.tablename+`/add-or-update?refid=`+order.goodid);\r\n\t\t\t},\r\n            //物流\r\n            logistics(order) {\r\n                this.$utils.jump(`./logistics?id=`+order.id);\r\n            },\r\n\t\t\tasync returnGood(order) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '是否退货?',\r\n\t\t\t\t\tcontent: '退货审核通过后,金额将返回账户中',\r\n\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\torder.sfsh = '待审核';\r\n\t\t\t\t\t\torder.role = uni.getStorageSync(\"nowTable\");\r\n\t\t\t\t\tawait  _this.$api.update('orders', order);\r\n\t\t\t\t\t_this.$utils.msg(`申请已提交`);\r\n\t\t\t\t\t\t// let table = uni.getStorageSync(\"nowTable\");\r\n// \t\t\t\t\t\tif (res.confirm) {\r\n// \t\t\t\t\t\t\torder.status = '已退款';\r\n// \t\t\t\t\t\t\t// 设置订单状态为取消\r\n// \t\t\t\t\t\t\tlet res = await _this.$api.update('orders', order);\r\n// // // // // // // // // // // // // // // // // // // // //                             // 加回库存数量\r\n//                             if(order.tablename == `shangpin` && order.type!=3){\r\n//                                 res = await _this.$api.info(order.tablename, order.goodid);\r\n//                                 if(res.code==0){\r\n//                                     res.data.alllimittimes = Number(res.data.alllimittimes) + Number(order.buynumber);\r\n//                                     await _this.$api.update(order.tablename,  res.data);\r\n//                                 }\r\n//                             }\r\n// // // // // // // // // // // // // \t\t\t\t\t\t\t_this.hasNext = true;\r\n// \t\t\t\t\t\t\t// 重新加载数据\r\n// \t\t\t\t\t\t\tif (_this.mescroll) _this.mescroll.resetUpScroll()\r\n// \t\t\t\t\t\t\tif(order.type==1 || order.type==3) {\r\n// \t\t\t\t\t\t\t\t// 退回用户余额\r\n// \t\t\t\t\t\t\t\t_this.user.money = Number(_this.user.money) + Number(order.total);\r\n// \t\t\t\t\t\t\t} else if(order.type==2) {\r\n// \t\t\t\t\t\t\t\t// 退回用户积分\r\n// \t\t\t\t\t\t\t\t_this.user.jf = Number(_this.user.jf) + Number(order.total);\r\n// \t\t\t\t\t\t\t}\r\n// \t\t\t\t\t\t\t_this.$api.update(table, _this.user);\r\n// \t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync cancelGroup(order) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否取消拼团',\r\n\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\tlet table = uni.getStorageSync(\"nowTable\");\r\n\t\t\t\t\t\tif (res.confirm) {\r\n                            let res = await _this.$api.info(order.tablename, order.goodid);\r\n                            let goodDetail = res.data;\r\n                            goodDetail.curpeople = goodDetail.curpeople-1;\r\n\t\t\t\t\t\t\tres = await _this.$api.update(order.tablename, goodDetail);\r\n\t\t\t\t\t\t\torder.status = '已退款';\r\n\t\t\t\t\t\t\t// 设置订单状态为取消\r\n\t\t\t\t\t\t\tres = await _this.$api.update('orders', order);\r\n\t\t\t\t\t\t\t_this.hasNext = true;\r\n\t\t\t\t\t\t\t// 重新加载数据\r\n\t\t\t\t\t\t\tif (_this.mescroll) _this.mescroll.resetUpScroll()\r\n                            // 退回用户余额\r\n                            _this.user.money = Number(_this.user.money) + Number(order.total);\r\n                            if(goodDetail.jf) {\r\n                                // 减去用户积分\r\n                                _this.user.jf = Number(_this.user.jf) - Number(order.total);\r\n                            }\r\n\t\t\t\t\t\t\t_this.$api.update(table, _this.user);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 取消订单\r\n\t\t\t */\r\n\t\t\tasync cancel(order) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否取消订单',\r\n\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\torder.status = '已取消';\r\n\t\t\t\t\t\t\t// 设置订单状态为取消\r\n\t\t\t\t\t\t\tlet res = await _this.$api.update('orders', order);\r\n                            // 加回库存数量\r\n                            if(order.tablename == `shangpin`){\r\n                                res = await _this.$api.info(order.tablename, order.goodid);\r\n                                if(res.code==0){\r\n                                    res.data.alllimittimes = res.data.alllimittimes + order.buynumber;\r\n                                    await _this.$api.update(order.tablename,  res.data);\r\n                                }\r\n                            }\r\n\t\t\t\t\t\t\t_this.hasNext = true;\r\n\t\t\t\t\t\t\t// 重新加载数据\r\n\t\t\t\t\t\t\tif (_this.mescroll) _this.mescroll.resetUpScroll()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 支付订单\r\n\t\t\t */\r\n\t\t\tasync pay(order) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tlet table = uni.getStorageSync(\"nowTable\");\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否支付订单',\r\n\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tif(order.type==1){\r\n\t\t\t\t\t\t\t\tif (_this.user.money - order.total < 0) {\r\n\t\t\t\t\t\t\t\t\t_this.$utils.msg('余额不足，请先充值');\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_this.$utils.msgBack('支付成功');\r\n\t\t\t\t\t\t\t\t// 减少余额\r\n\t\t\t\t\t\t\t\t_this.user.money = _this.user.money - order.total;\r\n\t\t\t\t\t\t\t\tif(_this.user.jf||_this.user.jf==0){\r\n\t\t\t\t\t\t\t\t\t_this.user.jf = parseFloat(_this.user.jf) + parseFloat(order.total);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tawait _this.$api.update(table, _this.user);\r\n\t\t\t\t\t\t\t}else if(order.type==2){\r\n\t\t\t\t\t\t\t\tif (_this.user.jf - order.total < 0) {\r\n\t\t\t\t\t\t\t\t\t_this.$utils.msg('积分不足，兑换商品失败');\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_this.$utils.msgBack('兑换成功');\r\n\t\t\t\t\t\t\t\t// 减少积分\r\n\t\t\t\t\t\t\t\t_this.user.jf = _this.user.jf - order.total;\r\n\t\t\t\t\t\t\t\tawait _this.$api.update(table, _this.user);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\torder.status = '已支付';\r\n\t\t\t\t\t\t\t// 设置订单状态为已支付\r\n\t\t\t\t\t\t\tlet res = await _this.$api.update('orders', order);\r\n\t\t\t\t\t\t\t// 重新加载数据\r\n\t\t\t\t\t\t\tif (_this.mescroll) _this.mescroll.resetUpScroll()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 确认收货\r\n\t\t\t */\r\n\t\t\tasync onConfirm(order){\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '是否确认收货',\r\n\t\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\t\tlet table = uni.getStorageSync(\"nowTable\");\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\torder.status = '已完成';\r\n\t\t\t\t\t\t\t// 设置订单状态为取消\r\n\t\t\t\t\t\t\tlet res = await _this.$api.update('orders', order);\r\n\t\t\t\t\t\t\t_this.hasNext = true;\r\n\t\t\t\t\t\t\t// 重新加载数据\r\n\t\t\t\t\t\t\tif (_this.mescroll) _this.mescroll.resetUpScroll()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n            async del(id) {\r\n                var _this = this;\r\n                uni.showModal({\r\n                    title: '提示',\r\n                    content: '是否确认删除',\r\n                    success: async function(res) {\r\n                        if (res.confirm) {\r\n                            let res = await _this.$api.del('orders', JSON.stringify([id]));\r\n                            if (_this.mescroll) _this.mescroll.resetUpScroll();\r\n                            _this.$utils.msg('删除成功')\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.cover {\r\n\t\twidth: 150upx;\r\n\t\theight: 150upx;\r\n\t}\r\n</style>\r\n\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop-order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../java/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shop-order.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}